# SmartAgent2 自动化测试

## 概述

本目录包含 SmartAgent2 的端到端自动化测试工具，覆盖对话交互、记忆提取、用户画像、人格切换、系统健康和边界异常等 7 大类测试场景。

## 文件说明

| 文件 | 说明 |
|------|------|
| `auto_test.py` | 自动化测试执行脚本，支持命令行运行 |
| `test_dataset.json` | 测试用例数据集（7 个套件，21 个用例） |
| `TEST_PLAN.md` | 测试方案设计文档 |

## 测试用例分布

| 套件 | 用例数 | 优先级 | 说明 |
|------|--------|--------|------|
| 基础对话与记忆提取 | 4 | P0 | 验证对话响应和记忆自动提取 |
| 记忆检索与个性化推荐 | 2 | P0 | 验证记忆检索和个性化回复 |
| 用户画像验证 | 3 | P0 | 验证画像自动构建的准确性 |
| 记忆统计与导出 | 2 | P1 | 验证统计和导出功能 |
| 人格切换测试 | 3 | P1 | 验证多人格切换（小智/贾维斯/阿尔弗雷德） |
| 系统健康与配置 | 3 | P0 | 验证系统基础服务 |
| 边界与异常测试 | 4 | P2 | 验证异常输入处理 |

## 使用方法

### 1. 命令行运行

```bash
# 确保 SmartAgent2 服务已启动
cd /path/to/smartagent2
python -m uvicorn smartagent2.main:app --host 0.0.0.0 --port 8000

# 运行自动化测试
python tests/auto/auto_test.py
```

### 2. Web 测试仪表板

配合 Web 测试仪表板使用，可在浏览器中交互式执行测试并查看可视化报告。

## 测试结果

最近一次测试结果（v2.1.0）：
- **通过率**: 90%（19 通过 / 0 失败 / 2 警告）
- **总耗时**: 约 290 秒
- **警告说明**: TC-MEM-001/002 为 LLM 回复关键词软验证，因模型回复随机性导致，属正常现象
